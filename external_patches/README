
"external_patches" for SB2:
===========================

This directory contains patches to external components that are recommended
to be used in the SB2'ed environment.

Short description of the files:

glibc-2.3.6-elf-rtld.c.patch, glibc-2.5-elf-rtld.c.patch,
glibc-2.8-elf-rtld.c.patch
--------------------------------------------------------

	A small patch for the dynamic linker/loader ("ld.so", also known as
	"ld-linux.so"). The dynamic linker is part of the "glibc" package.

	This patch adds one command line option which is only used
	when the dynamic linker is started as an ordinary program,
	which is a seldom used way to start dynamically linked
	programs. SB2 uses that option to preserve semantics of the
	exec* calls

	[SB2 starts the dynamic linker as an ordinary program,
	to be able to get full control of the execution environment -
	this is somewhat complex system. Study the implementation
	of SB2's exec-related functions for full details]

	Note that this patch causes no harm in the default case, i.e.
	when the dynamic linker is started "automatically" by the kernel.

glibc-2.5-ld.so-rpath-prefix-option.patch,
glibc-2.8-ldso-rpath-prefix-option.patch
-----------------------------------------
	
	This patch adds a new option "--rpath-prefix" to ld.so.
	This makes it possible to add a prefix to all RPATH and
	RUNPATH options from binaries and libraries; that way 
	Scratchbox 2 can run also host-compatible binaries that
	contain such options (without this, the RPATHs would
	refer to the libraries on the host system and not to
	the correct libraries under 'target_root').

	Note that this patch causes no harm in the default case, i.e.
	when the dynamic linker is started "automatically" by the kernel.

glibc-2.5-nsswitchconf-location.patch,
glibc-2.8-nsswitchconf-location.patch
-------------------------------------
	This patch makes location of the /etc/nsswitch.conf file
	to be run-time configurable via an environment variable.

	This is needed for correct operation with Scratchbox 2.
	Without this, the sb2-virtualized environment will
	always read /etc/nsswitch.conf from the host.

glibc-2.5-nscd-socket-location
glibc-2.8-nscd-socket-location.patch
------------------------------
	This patch makes location of nscd's socket to be run-time
	configurable via an environment variable.

glibc-2.5-ldso-nodefaultdirs-option
glibc-2.8-ldso-nodefaultdirs-option.patch
-----------------------------------
	Adds a new option "--nodefaultdirs" to ld.so.

	This option disables searching from the default directories
	(/lib,/usr/lib) and also disables use of ld.so's search
	cache.

	This is recommended for correct operation with Scratchbox 2;
	without this, libraries may be incorrectly loaded from the
	host environment (such libraries that are missing from
	the "scratchboxed" environment but are present in the host)

